<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Assistant IA - n8n</title>
    <style>
        /* STYLE (Design de la page) */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .chat-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            height: 120px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            resize: none;
            font-size: 16px;
            box-sizing: border-box; /* Important pour les marges */
            margin-bottom: 15px;
        }

        button {
            background-color: #ff6b6b; /* Couleur de bouton (tu peux changer) */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }

        button:hover {
            background-color: #e55a5a;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #zoneReponse {
            margin-top: 25px;
            padding: 15px;
            background-color: #eef2f5;
            border-radius: 6px;
            text-align: left;
            min-height: 60px;
            white-space: pre-wrap; /* Garde les sauts de ligne de l'IA */
            color: #444;
            border-left: 4px solid #ff6b6b;
            display: none; /* Cach√© par d√©faut */
        }
    </style>
</head>
<body>

    <div class="chat-container">
        <h2>ü§ñ Posez votre question</h2>
        
        <textarea id="champQuestion" placeholder="Ex: Peux-tu m'√©crire un po√®me sur l'IA ?"></textarea>
        
        <button id="btnEnvoyer" onclick="envoyerQuestion()">Envoyer √† l'IA</button>

        <div id="zoneReponse"></div>
    </div>

    <script>
        async function envoyerQuestion() {
            // 1. On r√©cup√®re les √©l√©ments de la page
            const input = document.getElementById('champQuestion');
            const output = document.getElementById('zoneReponse');
            const btn = document.getElementById('btnEnvoyer');
            const questionText = input.value;

            // 2. V√©rification : Si c'est vide, on arr√™te
            if (!questionText.trim()) {
                alert("Merci d'√©crire une question !");
                return;
            }

            // 3. √âtat de chargement (on grise le bouton)
            btn.disabled = true;
            btn.innerText = "R√©flexion en cours...";
            output.style.display = "block";
            output.innerText = "‚è≥ L'IA est en train d'√©crire...";

            try {
                // 4. Envoi de la donn√©e √† n8n (Ton URL de Production)
                const response = await fetch('https://x-ai.app.n8n.cloud/webhook/question', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        "question": questionText 
                    })
                });

                // 5. R√©ception de la r√©ponse
                if (response.ok) {
                    const data = await response.text(); // Ou response.json() selon ton dernier n≈ìud n8n
                    
                    // Si le r√©sultat est un objet JSON (ex: {"text": "..."}), il faudra peut-√™tre adapter ici.
                    // Pour l'instant, on affiche le texte brut re√ßu.
                    output.innerText = data;
                } else {
                    output.innerText = "Erreur : Le serveur n8n a renvoy√© un probl√®me.";
                }

            } catch (error) {
                console.error("Erreur Fetch:", error);
                output.innerText = "Erreur de connexion. V√©rifiez que le workflow est bien ACTIF (Publish).";
            } finally {
                // 6. On remet le bouton normal
                btn.disabled = false;
                btn.innerText = "Envoyer √† l'IA";
            }
        }
    </script>

</body>
</html>
